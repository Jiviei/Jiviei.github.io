---
order: 3.62
title: "@PS @AL [done] Переключение языка интерфейса"
---

Сейчас у приложения есть набор перевода UI на английский язык, но его нельзя включить, поскольку перевод неполный: например, не переводятся некоторые формы.

Нужно, чтобы при переключении языка переводился весь интерфейс.

[Исходная US](./../../../backlog/uluchshenie-mekhanizma-lokalizaci)

## Критерии

1. Язык интерфейса можно изменить только в редакторе на главной странице. В статьях и в докпортале переключатель скрыт

2. В правом верхнем углу есть кнопка смены языка “[icon:globe] <language>”, где `language` - текущий язык, например “Русский” или “English“

   1. При нажатии на кнопку открывается выпадающее меню с выбором доступных языков, где отображаются все доступные языки, кроме текущего

   2. В выпадающем меню языки отображаются локализованом виде, например -- Русский, English, Français, Чӑваш

3. На выбор доступно два языка - русский и английский

4. При переключении языка изменяется только язык интерфейса, каталоги и статьи не отфильтровываются и показываются на выбранном языке для статей (на данный момент - только русском)

5. Язык интерфейса не зависит от префикса в пути, пользователь может установить русский язык несмотря на `app.gram.ax/en/<catalog>`

6. По умолчанию используется язык браузера (системы в десктопе), если приложение его не поддерживает, то используется стандартный

## Технические критерии

1. Формы поддерживают локализацию: можно указать ключ, который будет использован при локализации

2. `UiLocalization` поддерживает группировку локализаций и можно обратиться как `useLocalize("menu.test1.test")`, типизация сохраняется ([stackoverflow](https://stackoverflow.com/questions/47057649/typescript-string-dot-notation-of-nested-object))

   1. Файл с локализацией реорганизован и разделён на `locale.ru.ts` и `locale.en.ts`. Тип подтягивается из дефолтной локали, т.е. из русской, а в английской нужно соблюсти все свойства

3. Есть возможность использовать `useLocalize` без использования React Context, по аналогии с `refreshPage`

4. В докпортале используется `AsyncLocalStorage` для получения контекста в любой части кода, а в вебе язык берётся из `LocalStorage`