---
order: 1
title: Воркфлоу согласования
---

Договоренности:

-  Проверяющий может оставить комментарии и изменить текст в рамках одной ветки. Управлять ветками не сможет. Происследовать: можно ли настроить так, чтобы проверяющие ТОЛЬКО оставляли комменты, не могли редактировать.

-  Автоматический мерж не подойдет, публикации привязаны к датам. 

-  Создатель инструкции должен сам мержить статью в мастер.

-  Сначала проверяет техпис, только потом док уходит на проверку владельцу ИС.

-  Может быть несколько владельцев ИС (проверяющих). За разные части системы могут отвечать разные люди. 

-  Обязательно должен быть указан проверяющий из команды техписов. Если есть апрув от этого проверяющего, публикация (мерж ветки) доступна. 

-  Сам себя техпис не может указать в качестве проверяющего.

-  Настя может проверить, кто согласовал мерж ветки (всех проверяющих).

-  Отсутствие согласования от владельца ИС не блокирует публикацию (мерж ветки).

-   

:::info:true Требования Х5

Я, как технический писатель, хочу иметь возможность проводить ревью документа и согласовать документ с коллегами, чтобы получить подтверждение корректности представленной в нем информации.

Детали процесса согласования определяются на этапе реализации.

Допускается разделение статусной модели и процесса по согласованию.

-  Возможность назначать проверяющих/согласующих в разрезе документа.

-  В результате назначения сотрудникам  автоматически отправляется  e-mail со ссылкой на проверяемый документ.

-  Функционал комментирования документа по тексту (к словам и фрагментам текста ). Комментировать по тексту документ могут все, у кого есть соответствующие права  и доступ к документу

-  Возможность отправки уведомления на e-mail владельцу документа об изменении статуса согласования и о полученных комментариях

-  Возможность публикации версии документа после согласования и внесения и всех правок в документ.

-  Возможность поделиться ссылкой на документ для проверки  и комментирования документа

:::

### Ключевые пользователи

-  Администратор.

-  Владелец воркспейса.

-  Редактор -- пользователь с лицензией.

-  Проверяющий -- участник согласования.

-  Подтверждающий -- последнее звено в воркфлоу согласования, после проверки подтверждающим происходит слияние.

### Определения

-  Запрос на слияние

-  Воркфлоу согласования

### Цели

-  Я, как технический писатель, хочу иметь возможность проводить ревью документа и согласовать документ с коллегами, чтобы получить подтверждение корректности представленной в нем информации.

## Процессы

### Настройка политики слияния. Владелец воркспейса

1. По умолчанию все слияния веток напрямую разрешены. Владелец воркспейса может:

   1. Запретить слияния напрямую для всех каталогов. Тогда в каждом каталоге для слияния нужно будет указать минимум одного проверяющего.

   2. Запретить слияние напрямую для выбранных каталогов. Тогда в выбранном каталоге для слияния нужно будет указать минимум одного проверяющего.

2. По умолчанию публикация напрямую во все ветки разрешена. Владелец воркспейса может назначить основную ветку для каталога и запретить публикацию в эту ветку напрямую.

### Создание запроса на слияние. Технический писатель

1. В интерфейсе приложения нажимаю “Создать запрос на слияние”.

2. Выбираю, в какую ветку хочу опубликовать текущую.

3. Выбираю проверяющих из списка сотрудников (каталог из AD).

   1. Можно указать неограниченное количество проверяющих. Проверяющие работают параллельно и их проверки равносильны.

4. Выбираю подтверждающего из списка сотрудников.

5. Нажимаю “Создать запрос”.

   1. Проверяющий может без ограничений работать в текущей ветке: изменять текст, удалять и добавлять статьи, оставлять комментарии. Также может подтвердить слияние или отправить на доработку.

   2. Проверяющий не может выходить из интерфейса запроса: редактировать другие ветки, удалять слияние.

6. На почту всем участникам запроса на слияние отправляется письмо. Также могу скопировать ссылку на запрос и отправить в мессенджере.

### Проверка запроса. Проверяющий

1. Получаю на почту письмо, которое содержит информацию о запросе. Перехожу по ссылке.

2. Просматриваю в левой навигации, что изменилось.

   1. Подсвечиваются добавленные, измененные и удаленные статьи.

   2. Каждую статью можно открыть и просмотреть, что именно изменилось.

   3. Изменения не пропадают после просмотра, как это было бы при открытии ветки, а пропадают после ручного резолва. Могу резолвить как статью целиком, так и каждое изменение по отдельности.

   4. Сравниваются версии: состояние каталога, из которого была создана ветка/измененная ветка.

3. Подтверждаю или отклоняю слияние.

   1. Есть замечания:

      1. Оставляю комментарии и меняю текст.

      2. Публикую изменения.

         1. Чекбокс “Подвтердить слияние” недоступен. В тултипе “Вы оставили комментарии или изменили текст. Эти изменения отправятся автору запроса на доработку”.

         2. Чекбокс “На доработку” заполнен и недоступен для изменения.

   2. Нет замечаний:

      1. Открываю окно публикации изменений, ставлю “Подтвердить слияние”.  И публикую изменения.

         1. Чекбокс “Подвтердить слияние” заполнен и недоступен для изменения.

         2. Чекбокс “На доработку” недоступен. В тултипе “Вы не оставили комментарии для автора запроса. Отредактируйте или прокомментируйте текст, чтобы отправить запрос на доработку”.

### Проверка запроса. Подтверждающий

1. Когда все проверяющие подтвердили запрос на слияние, получаю на почту письмо, которое содержит информацию о запросе. Перехожу по ссылке.

2. Просматриваю в левой навигации, что изменилось (как и в случае с проверяющим).

3. Подтверждаю или отклоняю слияние.

   1. Есть замечания (как и в случае с проверяющим).

   2. Нет замечаний (как и в случае с проверяющим).

4. Если нет замечаний, после мого подтверждения ветка мержится. Запрос пропадает из списка.

### Просмотр запросов на слияние

-  Технический писатель -- видит все запросы по каталогу. Если является проверяющим или подтверждающим, все равно может просматривать все.

-  Проверяющий -- видит все запросы по каталогу, в которых участвует.

-  Подтверждающий -- видит все запросы по каталогу, в которых участвует.

1. Открываю интерфейс управления ветками.

2. Кликаю на название запроса -- открывается сравнение версий, как при проверке.

3. Кликаю (куда?) -- открывается информация о запросе: название, автор, дата создания, подтверждающий и проверяющие, статус (кто отклонил, кто подтвердил).